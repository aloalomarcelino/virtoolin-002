<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>virtoolin — Painel de Atendimento</title>

<!-- Fonte -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">

<!-- intl-tel-input CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@19.2.14/build/css/intlTelInput.css"/>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@19.2.14/build/js/intlTelInput.min.js"></script>
<script src="https://unpkg.com/imask"></script>

<!-- CSS -->
<link rel="stylesheet" href="css/style.css" />
</head>

<body>
<div id="notificacao" class="notificacao oculto">✔ Novo processo concluído com sucesso!</div>

<header>
  <div class="header-conteudo">
    <div class="topo-esquerda">
      <div class="linha-info"><strong><em>© virtoolin atende o:</em></strong></div>
      <div class="titulo-cartorio">2º RCPN</div>
      <div class="data-hora" id="dataHora"></div>
    </div>

    <div class="topo-direita">
      <a href="clientes.html" class="link-topo">meus clientes</a>
      <a href="atos.html" class="link-topo">meus atos</a>
      <a href="jornal.html" class="link-topo">jornal</a>
      <a href="#" class="sair">SAIR</a>
    </div>
  </div>
</header>

<main>
 <form id="formVirtoolin">

<!-- 1️⃣ Identificação do Atendimento -->
<fieldset class="faixa-atendimento">
  <legend>Atendimento</legend>
  <div class="linha faixa1-linha">
    <div class="info-colaborador">
      <span class="label-colaborador">Colaborador:</span>
      <input type="text" id="colaborador" class="campo-colaborador" placeholder="COLABORADOR" readonly>
    </div>
    <div class="botoes-navegacao">
      <button type="button" class="btn-nav" id="btnClientes">CLIENTES</button>
      <button type="button" class="btn-nav" id="btnAtos">ATOS</button>
      <button type="button" class="btn-nav" id="btnJornal">JORNAL</button>
    </div>
  </div>
</fieldset>

  <!-- 2️⃣ Identificação do Requerente -->
  <fieldset class="faixa-requerente">
    <legend>Identificação do Requerente</legend>

    <!-- Linha 1 — CPF/CNPJ e Nome -->
    <div class="linha">
      <div class="campo-com-botao">
        <input type="text" id="cpfCnpj" class="cor-principal" placeholder="CPF ou CNPJ">
        <button type="button" id="buscarCliente" title="pesquisar requerente">P</button>
      </div>

      <div class="campo-com-botao">
        <input type="text" id="nomeRequerente" class="cor-principal" placeholder="NOME COMPLETO DO REQUERENTE">
        <button type="button" id="editarCliente" title="editar cadastro">E</button>
      </div>
    </div>

    <!-- Linha 2 — Contatos -->
    <div class="linha">
      <input type="text" id="whatsapp" class="cor-principal" placeholder="WHATSAPP">
      <input type="text" id="outroContato" class="cor-principal" placeholder="CONTATO (OPCIONAL)">
      <input type="email" id="email" class="cor-principal" placeholder="E-MAIL (opcional)">
    </div>

    <!-- Linha 3 — Ações do Requerente -->
    <div class="linha botoes-clientes">
      <button type="button" id="novoCliente" title="cadastrar novo requerente" class="cor-principal">CADASTRAR</button>
      <button type="button" id="verMais" title="ver mais detalhes" class="cor-principal">VER MAIS</button>
      <button type="button" id="limparCampos" title="limpar dados do requerente" class="cor-principal">LIMPAR</button>
    </div>

    <!-- Linha 4 — Detalhes adicionais (oculta até clicar em "Ver mais") -->
    <div id="detalhesRequerente" class="linha flex-column">

  <!-- Linha 1 -->
  <div class="linha">
    <input type="text" id="cep" class="cor-principal campo-pequeno" placeholder="CEP">
    <input type="text" id="endereco" class="cor-principal campo-grande auto" placeholder="Endereço" readonly>
    <input type="text" id="numero" class="cor-principal campo-pequeno" placeholder="Número">
  </div>

  <!-- Linha 2 -->
  <div class="linha">
    <input type="text" id="bairro" class="cor-principal campo-pequeno auto" placeholder="Bairro" readonly>
    <input type="text" id="cidade" class="cor-principal campo-medio auto" placeholder="Cidade/UF" readonly>
    <input type="text" id="complemento" class="cor-principal campo-medio" placeholder="Complemento">
    <button type="button" id="copiarEndereco" class="cor-principal" title="copiar endereço completo">C</button>
  </div>

  <!-- Linha 3 -->
  <textarea id="observacoes" class="cor-principal" placeholder="Observações internas (opcional)"></textarea>
</div>
  </fieldset>

  <!-- 3️⃣ Identificação do Serviço -->
  <fieldset class="faixa-servico">
    <legend>Identificação do Serviço</legend>
    
    <!-- Abas de serviços -->
    <div class="abas-servicos">
      <button type="button" class="aba-servico ativo" data-servico="1rcpn">1º RCPN</button>
      <button type="button" class="aba-servico" data-servico="2rcpn">2º RCPN</button>
      <button type="button" class="aba-servico" data-servico="5rcpn">5º RCPN</button>
      <button type="button" class="aba-servico" data-servico="casamento">CASAMENTO</button>
      <button type="button" class="aba-servico" data-servico="crc">CRC</button>
      <button type="button" class="aba-servico" data-servico="livroe">LIVRO E</button>
      <button type="button" class="aba-servico" data-servico="busca">BUSCA</button>
    </div>

    <!-- Conteúdo 1º RCPN -->
    <div id="servico-1rcpn" class="conteudo-servico ativo">
      <div class="linha">
        <select id="item1rcpn" class="campo-grande cor-principal">
          <option value="">Selecione o ato...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="livro1rcpn" class="campo-pequeno cor-principal" placeholder="Livro" />
        <input type="text" id="folha1rcpn" class="campo-pequeno cor-principal" placeholder="Folha" />
        <input type="text" id="termo1rcpn" class="campo-pequeno cor-principal" placeholder="Termo" />
        <input type="text" id="ano1rcpn" class="campo-pequeno cor-principal" placeholder="Ano" />
      </div>
      <div class="linha flex-column">
        <textarea id="info1rcpn" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo 2º RCPN -->
    <div id="servico-2rcpn" class="conteudo-servico">
      <div class="linha">
        <select id="item2rcpn" class="campo-grande cor-principal">
          <option value="">Selecione o ato...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="livro2rcpn" class="campo-pequeno cor-principal" placeholder="Livro" />
        <input type="text" id="folha2rcpn" class="campo-pequeno cor-principal" placeholder="Folha" />
        <input type="text" id="termo2rcpn" class="campo-pequeno cor-principal" placeholder="Termo" />
        <input type="text" id="ano2rcpn" class="campo-pequeno cor-principal" placeholder="Ano" />
      </div>
      <div class="linha flex-column">
        <textarea id="info2rcpn" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo 5º RCPN -->
    <div id="servico-5rcpn" class="conteudo-servico">
      <div class="linha">
        <select id="item5rcpn" class="campo-grande cor-principal">
          <option value="">Selecione o ato...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="livro5rcpn" class="campo-pequeno cor-principal" placeholder="Livro" />
        <input type="text" id="folha5rcpn" class="campo-pequeno cor-principal" placeholder="Folha" />
        <input type="text" id="termo5rcpn" class="campo-pequeno cor-principal" placeholder="Termo" />
        <input type="text" id="ano5rcpn" class="campo-pequeno cor-principal" placeholder="Ano" />
      </div>
      <div class="linha flex-column">
        <textarea id="info5rcpn" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo CASAMENTO -->
    <div id="servico-casamento" class="conteudo-servico">
      <div class="linha">
        <select id="itemcasamento" class="campo-grande cor-principal">
          <option value="">Selecione o ato...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="nomeNoivo" class="campo-grande cor-principal" placeholder="Nome do Noivo/Nubente 1" />
        <input type="text" id="nomeNoiva" class="campo-grande cor-principal" placeholder="Nome da Noiva/Nubente 2" />
      </div>
      <div class="linha">
        <input type="text" id="dataCasamento" class="campo-medio cor-principal" placeholder="Data do Casamento" />
        <input type="text" id="localCasamento" class="campo-grande cor-principal" placeholder="Local do Casamento" />
      </div>
      <div class="linha flex-column">
        <textarea id="infocasamento" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo CRC -->
    <div id="servico-crc" class="conteudo-servico">
      <div class="linha">
        <select id="itemcrc" class="campo-grande cor-principal">
          <option value="">Selecione o estado...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="nomePessoaCRC" class="campo-grande cor-principal" placeholder="Nome da pessoa a ser pesquisada" />
        <input type="text" id="dataNascCRC" class="campo-medio cor-principal" placeholder="Data de Nascimento" />
      </div>
      <div class="linha flex-column">
        <textarea id="infocrc" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo LIVRO E -->
    <div id="servico-livroe" class="conteudo-servico">
      <div class="linha">
        <select id="itemlivroe" class="campo-grande cor-principal">
          <option value="">Selecione o ato...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="livroLivroE" class="campo-pequeno cor-principal" placeholder="Livro" />
        <input type="text" id="folhaLivroE" class="campo-pequeno cor-principal" placeholder="Folha" />
        <input type="text" id="termoLivroE" class="campo-pequeno cor-principal" placeholder="Termo" />
        <input type="text" id="anoLivroE" class="campo-pequeno cor-principal" placeholder="Ano" />
      </div>
      <div class="linha flex-column">
        <textarea id="infolivroe" class="cor-principal" placeholder="Informações adicionais (opcional)"></textarea>
      </div>
    </div>

    <!-- Conteúdo BUSCA -->
    <div id="servico-busca" class="conteudo-servico">
      <div class="linha">
        <select id="itembusca" class="campo-grande cor-principal">
          <option value="">Selecione o tipo de busca...</option>
        </select>
      </div>
      <div class="linha">
        <input type="text" id="nomeBuscado" class="campo-grande cor-principal" placeholder="Nome para busca" />
        <input type="text" id="periodoBusca" class="campo-medio cor-principal" placeholder="Período (ex: 1990-2000)" />
      </div>
      <div class="linha flex-column">
        <textarea id="infobusca" class="cor-principal" placeholder="Detalhes da busca solicitada"></textarea>
      </div>
    </div>

  </fieldset>

  <!-- 4️⃣ Entrega e Pagamento -->
<fieldset class="faixa-entrega">
  <legend>Entrega e Pagamento</legend>
  
  <div class="linha info-automatica">
    <div class="info-box">
      <label>Valor Total:</label>
      <div id="valorCalculado" class="valor-display">R$ 0,00</div>
    </div>
    <div class="info-box">
      <label>Prazo de Entrega:</label>
      <div id="prazoCalculado" class="prazo-display">- dias úteis</div>
    </div>
    <div class="info-box">
      <label>Data de Entrega:</label>
      <div id="dataEntregaCalculada" class="data-display">--/--/----</div>
    </div>
  </div>

  <div class="linha">
    <input type="text" id="dataSolicitacao" class="cor-principal" placeholder="DATA DA SOLICITAÇÃO" readonly />
    <input type="text" id="numeroGuia" class="cor-principal destaque" placeholder="Nº DA GUIA" readonly />
  </div>
  
  <div class="linha" style="justify-content: center; margin-top: 15px; gap: 15px;">
    <button type="button" id="gerarGuia" style="background: #111; color: #fff; padding: 12px 28px; font-size: 14px; font-weight: 600;">
      GERAR GUIA DE PAGAMENTO
    </button>
    <button type="button" id="limparTudo" style="background: #fff; border: 1px solid #000; color: #000; padding: 12px 28px; font-size: 14px; font-weight: 600;">
      LIMPAR TUDO
    </button>
  </div>
</fieldset>

 </form>
</main>

<footer>
  <span></span>
  <span><span class="ovni">🛸</span> @aloalomarcelino</span>
</footer>

<!-- Script principal -->
<script src="js/script.js"></script>

<!-- Scripts inline essenciais -->
<script>
// ======== PROTEÇÃO DE ACESSO ========
const colaborador = localStorage.getItem('colaborador');
if (!colaborador) {
  alert('Sessão expirada. Faça login novamente.');
  window.location.href = 'acesso.html';
}

document.addEventListener('DOMContentLoaded', () => {
  const nome = localStorage.getItem('colaborador');
  if (nome) {
    const campo = document.getElementById('colaborador');
    if (campo) campo.value = nome;
  }

  // ======== DATA/HORA NO HEADER ========
  const atualizarDataHora = () => {
    const agora = new Date();
    const dia = String(agora.getDate()).padStart(2, '0');
    const mes = String(agora.getMonth() + 1).padStart(2, '0');
    const ano = agora.getFullYear();
    const hora = String(agora.getHours()).padStart(2, '0');
    const min = String(agora.getMinutes()).padStart(2, '0');
    const dataHora = document.getElementById('dataHora');
    if (dataHora) {
      dataHora.textContent = `${dia}/${mes}/${ano} — ${hora}:${min}`;
    }
  };
  atualizarDataHora();
  setInterval(atualizarDataHora, 60000);

  // ======== PREENCHE DATA DE SOLICITAÇÃO ========
  const hoje = new Date();
  const dia = String(hoje.getDate()).padStart(2, '0');
  const mes = String(hoje.getMonth() + 1).padStart(2, '0');
  const ano = hoje.getFullYear();
  const dataAtual = `${dia}/${mes}/${ano}`;
  const campoData = document.getElementById('dataSolicitacao');
  if (campoData && !campoData.value) campoData.value = dataAtual;

  // ======== NAVEGAÇÃO ========
  document.getElementById('btnClientes')?.addEventListener('click', () => {
    window.location.href = 'clientes.html';
  });

  document.getElementById('btnAtos')?.addEventListener('click', () => {
    window.location.href = 'atos.html';
  });

  document.getElementById('btnJornal')?.addEventListener('click', () => {
    window.location.href = 'jornal.html';
  });
});

// ======== MODAL DE SAIR ========
document.addEventListener('DOMContentLoaded', () => {
  const sairBtn = document.querySelector('.sair');

  if (sairBtn) {
    sairBtn.addEventListener('click', e => {
      e.preventDefault();

      const fundo = document.createElement('div');
      fundo.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,0.35);display:flex;justify-content:center;align-items:center;z-index:9999;animation:fadeIn 0.3s ease';

      const caixa = document.createElement('div');
      caixa.style.cssText = 'background:#fff;border:1px solid #000;border-radius:10px;padding:25px 30px;font-family:Roboto Mono,monospace;text-align:center;min-width:280px;box-shadow:0 4px 12px rgba(0,0,0,0.1);animation:slideUp 0.3s ease';

      caixa.innerHTML = `
        <p style="font-size:14px;font-weight:600;margin-bottom:16px;">
          Deseja realmente sair e voltar ao menu de acesso?
        </p>
        <div style="display:flex;justify-content:center;gap:10px;">
          <button id="confirmarSair" style="background:#111;color:#fff;border:none;border-radius:6px;padding:7px 14px;cursor:pointer;font-family:Roboto Mono;transition:all 0.2s ease;">SIM</button>
          <button id="cancelarSair" style="background:#f2f2f2;border:1px solid #aaa;border-radius:6px;padding:7px 14px;cursor:pointer;font-family:Roboto Mono;transition:all 0.2s ease;">NÃO</button>
        </div>
      `;

      fundo.appendChild(caixa);
      document.body.appendChild(fundo);

      document.getElementById('cancelarSair').addEventListener('click', () => fundo.remove());
      document.getElementById('confirmarSair').addEventListener('click', () => {
        localStorage.removeItem('colaborador');
        window.location.href = 'acesso.html';
      });
    });
  }
});
</script>
</body>
</html>